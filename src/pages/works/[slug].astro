---
import ProjectDetailLava from '../../components/ProjectDetailLava.astro';
import ProjectDetailFlourly from '../../components/ProjectDetailFlourly.astro';
import ProjectDetailFrama from '../../components/ProjectDetailFrama.astro';
import LayoutWorksDetail from '../../layouts/LayoutWorksDetail.astro';
import ProjectsSection from '../../components/WorksSection.astro';
import Menu from '../../components/MenuWorks.astro';

// Datos simulados, en un caso real, los obtendrías de una función o API
const projects = [
  { slug: 'lava', component: ProjectDetailLava },
  { slug: 'flourly', component: ProjectDetailFlourly },
  { slug: 'frama', component: ProjectDetailFrama },
];

// Obtener la ruta y extraer el `slug`
const pathname = Astro.url.pathname; // Ejemplo: '/works/lava'
const slug = pathname.split('/').pop(); // Obtiene la última parte de la ruta, en este caso 'lava'

const project = projects.find(p => p.slug === slug);

if (!project) {
  throw new Error(`No project found for slug: ${slug}`);
}

const ProjectComponent = project.component;
---

<LayoutWorksDetail>
  <Menu />
  <ProjectsSection />
  <ProjectComponent />
</LayoutWorksDetail>
