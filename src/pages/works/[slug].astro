---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Menu from '../../components/MenuWithImage.astro';
import ProjectsSection from '../../components/ProjectsSection.astro';
import MenuWorksImage from '../../images/white.png';

const pathname = Astro.url.pathname;
const slug = pathname.split('/').pop();

const projects = [
  { slug: 'lava-circular', componentPath: '../../components/Details/ProjectDetailLava.astro' },
  { slug: 'flourly', componentPath: '../../components/Details/ProjectDetailFlourly.astro' },
  { slug: 'frama', componentPath: '../../components/Details/ProjectDetailFrama.astro' },
];

const project = projects.find(p => p.slug === slug);

let ProjectComponent = null;

if (project) {
  ProjectComponent = (await import(project.componentPath)).default;
}
---
<script>
  import '@dotlottie/player-component';
</script>
<script src="../../scripts/lazy-loading-images.js"></script>
<script src="../../scripts/lazy-loading-lottie.js"></script>

<BaseLayout>
  <Menu 
    worksButtonClass="from-about"
    imageSrc={MenuWorksImage} 
    imageAlt="Illustration of a person resting"
  />
  <ProjectsSection 
    projectsSectionClass="projects opacity disabledButton"
    projectsImagesClass="opacity"
  />
  {ProjectComponent && <ProjectComponent />}
</BaseLayout>
